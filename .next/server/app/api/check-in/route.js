"use strict";(()=>{var e={};e.id=603,e.ids=[603],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},2222:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>w,requestAsyncStorage:()=>x,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{POST:()=>d});var n=r(9303),o=r(8716),i=r(3131),a=r(7070),u=r(1472),c=r(2076),p=r(5860);async function d(e){let t;let r=(0,u.t)(),{data:{user:s}}=await r.auth.getUser();if(!s)return a.NextResponse.json({success:!1,error:"Not authenticated"},{status:401});if(!(0,p.h)(e,s.id).allowed)return a.NextResponse.json({success:!1,error:"Too many requests"},{status:429});try{t=await e.json()}catch{return a.NextResponse.json({success:!1,error:"Invalid body"},{status:400})}try{let e=await (0,c.$)({registration_id:t.registration_id,entry_code:t.entry_code});return a.NextResponse.json({success:!0,...e})}catch(e){return console.error("check-in failed",e),a.NextResponse.json({success:!1,error:e.message||"Check-in failed"},{status:400})}}let l=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/check-in/route",pathname:"/api/check-in",filename:"route",bundlePath:"app/api/check-in/route"},resolvedPagePath:"D:\\Event-Management\\app\\api\\check-in\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:h,serverHooks:f}=l,v="/api/check-in/route";function w(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},2076:(e,t,r)=>{r.d(t,{$:()=>i,q:()=>o});var s=r(1472);async function n(e,t){let r=(0,s.t)(),{data:{session:n}}=await r.auth.getSession(),o=n?.access_token;if(!o)throw Error("Not authenticated");let i=await fetch(`https://bfspxxunptawbuivhvyq.supabase.co/functions/v1${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(t)});if(!i.ok){let t=await i.text();throw console.error("Edge function error",{path:e,status:i.status,body:t}),Error(t||"Edge function error")}return i.json()}async function o(e){return n("/register-event",{event_id:e})}async function i(e){return n("/check-in",e)}},5860:(e,t,r)=>{r.d(t,{h:()=>n});let s=new Map;function n(e,t){let r=function(e,t){let r=e.headers.get("x-forwarded-for")??"",s=r.split(",")[0]?.trim()||"unknown";return t?`${t}:${s}`:s}(e,t),n=Date.now(),o=s.get(r);return!o||n-o.windowStart>6e4?(s.set(r,{count:1,windowStart:n}),{allowed:!0}):o.count>=10?{allowed:!1}:(o.count+=1,{allowed:!0})}},1472:(e,t,r)=>{r.d(t,{t:()=>o});var s=r(1615),n=r(344);function o(){let e=(0,s.cookies)();return(0,n.createServerClient)("https://bfspxxunptawbuivhvyq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJmc3B4eHVucHRhd2J1aXZodnlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNjg0OTQsImV4cCI6MjA4MTY0NDQ5NH0.mMHB0vI6wvhAabaD8PJZaF3xNcoIzwOiUlvYCyizHgc",{cookies:{get:t=>e.get(t)?.value,set(t,r,s){e.set({name:t,value:r,...s})},remove(t,r){e.set({name:t,value:"",...r})}}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,958,972],()=>r(2222));module.exports=s})();